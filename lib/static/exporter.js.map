{"version":3,"sources":["../../src/static/exporter.js"],"names":["require","setIgnorePath","config","routes","siteData","clientStats","incremental","htmlProgress","length","paths","BUILD_ARTIFACTS","Comp","path","resolve","default","DocumentTemplate","Document","DefaultDocument","tasks","i","route","push","tick","Number","outputFileRate"],"mappings":";;;;;;;;;AAIA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;AARA;eAE0BA,OAAO,CAAC,oBAAD,C;IAAzBC,a,YAAAA,a;;;;;;;4BAQO;AAAA;;AAAA;AAAA;AAAA;AAAA;AACbC,YAAAA,MADa,QACbA,MADa,EAEbC,MAFa,QAEbA,MAFa,EAGbC,QAHa,QAGbA,QAHa,EAIbC,WAJa,QAIbA,WAJa,EAKbC,WALa,QAKbA,WALa;AAOPC,YAAAA,YAPO,GAOQ,qBAASJ,MAAM,CAACK,MAAhB,CAPR,EAQb;;AAEAP,YAAAA,aAAa,CAACC,MAAM,CAACO,KAAP,CAAaC,eAAd,CAAb;AAEMC,YAAAA,IAZO,GAYAX,OAAO,CAACY,cAAKC,OAAL,CACnBX,MAAM,CAACO,KAAP,CAAaC,eADM,EAEnB,eAFmB,CAAD,CAAP,CAGVI,OAfU,EAgBb;;AACMC,YAAAA,gBAjBO,GAiBYb,MAAM,CAACc,QAAP,IAAmBC,+BAjB/B;AAmBPC,YAAAA,KAnBO,GAmBC,EAnBD;;AAAA,mCAoBJC,CApBI;AAqBX,kBAAMC,KAAK,GAAGjB,MAAM,CAACgB,CAAD,CAApB,CArBW,CAsBX;;AACAD,cAAAA,KAAK,CAACG,IAAN;AAAA;AAAA;AAAA;AAAA,wCAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACH,0BAAY;AAChBnB,0BAAAA,MAAM,EAANA,MADgB;AAEhBS,0BAAAA,IAAI,EAAJA,IAFgB;AAGhBI,0BAAAA,gBAAgB,EAAhBA,gBAHgB;AAIhBK,0BAAAA,KAAK,EAALA,KAJgB;AAKhBhB,0BAAAA,QAAQ,EAARA,QALgB;AAMhBC,0BAAAA,WAAW,EAAXA,WANgB;AAOhBC,0BAAAA,WAAW,EAAXA;AAPgB,yBAAZ,CADG;;AAAA;AAUTC,wBAAAA,YAAY,CAACe,IAAb;;AAVS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAX;AAvBW;;AAoBb,iBAASH,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAGhB,MAAM,CAACK,MAA3B,EAAmCW,CAAC,EAApC,EAAwC;AAAA,oBAA/BA,CAA+B;AAevC;;AAnCY;AAAA,mBAoCP,oBAAQD,KAAR,EAAeK,MAAM,CAACrB,MAAM,CAACsB,cAAR,CAArB,CApCO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/* eslint-disable import/first, import/no-dynamic-require */\n\nconst { setIgnorePath } = require('../utils/binHelper')\n\nimport path from 'path'\n\nimport { DefaultDocument } from './RootComponents'\nimport { poolAll, progress } from '../utils'\nimport exportRoute from './exportRoute'\n\nexport default async ({\n  config,\n  routes,\n  siteData,\n  clientStats,\n  incremental,\n}) => {\n  const htmlProgress = progress(routes.length)\n  // Use the node version of the app created with webpack\n\n  setIgnorePath(config.paths.BUILD_ARTIFACTS)\n\n  const Comp = require(path.resolve(\n    config.paths.BUILD_ARTIFACTS,\n    'static-app.js'\n  )).default\n  // Retrieve the document template\n  const DocumentTemplate = config.Document || DefaultDocument\n\n  const tasks = []\n  for (let i = 0; i < routes.length; i++) {\n    const route = routes[i]\n    // eslint-disable-next-line\n    tasks.push(async () => {\n      await exportRoute({\n        config,\n        Comp,\n        DocumentTemplate,\n        route,\n        siteData,\n        clientStats,\n        incremental,\n      })\n      htmlProgress.tick()\n    })\n  }\n  await poolAll(tasks, Number(config.outputFileRate))\n}\n"],"file":"exporter.js"}